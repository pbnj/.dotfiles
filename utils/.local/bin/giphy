#!/bin/bash

set -eou pipefail

GIPHY_QUERY="${1:-/dev/stdin}"
GIPHY_RANDOM_NUMBER_BETWEEN_1_AND_25="$((RANDOM % 25))"

if [[ -n "${GIPHY_QUERY}" ]]; then
	curl -fsSL "https://giphy.com/search/${GIPHY_QUERY}" |
		rg -oP "(?<=gifs: ).*?(?=,$)" |
		jq -r ".[${GIPHY_RANDOM_NUMBER_BETWEEN_1_AND_25}] | .images.original.url"
fi
