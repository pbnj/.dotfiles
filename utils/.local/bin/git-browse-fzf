#!/bin/bash

# Author: Peter Benjamin
# Description: Open git file from local repo in the browser
# Dependencies:
# - git
# - git-extras
# - fzf
# - bat
# - awk

set -eou pipefail

CMD="git ls-files"

${CMD} |
  fzf-tmux \
    -p '90%' \
    --reverse \
    --preview 'cat {}' \
    --bind "ctrl-r:reload(${CMD}),enter:become(git browse \"$(git config branch."$(git rev-parse --abbrev-ref HEAD 2>/dev/null)".remote || echo origin)\")"
