#!/bin/bash

set -eou pipefail

git grep --line-number --no-column . |
	fzf-tmux --reverse --multi |
	awk -F: '{print $1":"$2}' |
	awk '{printf (NR%2==0) ? $0 "\n" : $0 ":"}' |
	awk -F: '{print $1" "$2" "$4}' |
	xargs -t -L1 git browse "$(git config branch."$(git rev-parse --abbrev-ref HEAD 2>/dev/null)".remote || echo 'origin')" ||
	true
