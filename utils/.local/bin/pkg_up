#!/usr/bin/env bash

set -euo pipefail
[[ -n "${DEBUG:-}" ]] && set -x

echo "Checking brew..."
BREW="arch -arm64 brew"
${BREW} update
BREW_OUTDATED="$(${BREW} outdated)"
if [[ -n "${BREW_OUTDATED}" ]]; then
  ${BREW} upgrade
  ${BREW} cleanup --prune=all
fi

echo "Checking npm..."
NPM_OUTDATED="$(npm outdated --global || true)"
if [[ -n "${NPM_OUTDATED}" ]]; then
  echo "${NPM_OUTDATED}"
  npm upgrade --global
fi
