{
    "inputs": [
        {
            "args": {
                "command": "make -qp | awk -F':' '/^[a-zA-Z0-9 ][^$#/\t= ]*:([^= ]|$)/ {split($1,A,/ /);for(i in A)print A[i ] }' | sort -u",
                "cwd": "${fileDirname}"
            },
            "command": "shellCommand.execute",
            "id": "makeTargets",
            "type": "command"
        },
        {
            "args": {
                "command": "npx britive-cli listprofiles | yq -P .[].name"
            },
            "command": "shellCommand.execute",
            "id": "britiveProfiles",
            "type": "command"
        },
        {
            "args": {
                "command": "terraform state list",
                "cwd": "${fileDirname}"
            },
            "command": "shellCommand.execute",
            "id": "terraformState",
            "type": "command"
        },
        {
            "id": "awsAccounts",
            "type": "command",
            "command": "shellCommand.execute",
            "args": {
                "command": "npx britive-cli listenvs -f csv 2>/dev/null | grep -v application, | awk -F',' '{print $2}'"
            }
        }
    ],
    "tasks": [
        {
            "label": "AWS: Copy Account ID",
            "type": "shell",
            "command": [
                "echo -n '${input:awsAccounts}'",
                "|",
                "awk",
                "'{print $1}'",
                "|",
                "pbcopy"
            ],
            "problemMatcher": [],
            "presentation": {
                "echo": true,
                "reveal": "silent",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": true
            }
        },
        {
            "label": "AWS: Copy Account Alias",
            "type": "shell",
            "command": [
                "echo -n '${input:awsAccounts}'",
                "|",
                "awk",
                "-F'[()]'",
                "'{print $2}'",
                "|",
                "pbcopy"
            ],
            "problemMatcher": [],
            "presentation": {
                "echo": true,
                "reveal": "silent",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            }
        },
        {
            "label": "tfsec: workspace",
            "type": "shell",
            "command": "tfsec",
            "args": [
                "--force-all-dirs",
                "-f",
                "csv",
                "|",
                "grep",
                "-v",
                "file,start_line"
            ],
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [
                {
                    "owner": "tfsec",
                    "source": "tfsec",
                    "fileLocation": [
                        "relative",
                        "${workspaceFolder}"
                    ],
                    "pattern": {
                        "regexp": "^(.*),(.*),(.*),(.*),(.*),(.*),(.*),(.*)$",
                        "file": 1,
                        "line": 2,
                        "endLine": 3,
                        "code": 4,
                        "severity": 5,
                        "message": 6,
                        "loop": true
                    }
                }
            ],
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": true
            }
        },
        {
            "label": "tfsec: local directory",
            "type": "shell",
            "command": "tfsec",
            "args": [
                "-f",
                "csv",
                "|",
                "grep",
                "-v",
                "file,start_line"
            ],
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [
                {
                    "owner": "tfsec",
                    "source": "tfsec",
                    "fileLocation": [
                        "relative",
                        "${fileDirname}"
                    ],
                    "pattern": {
                        "regexp": "^(.*),(.*),(.*),(.*),(.*),(.*),(.*),(.*)$",
                        "file": 1,
                        "line": 2,
                        "endLine": 3,
                        "code": 4,
                        "severity": 5,
                        "message": 6,
                        "loop": true
                    }
                }
            ],
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": true
            }
        },
        {
            "command": "make ${input:makeTargets}",
            "label": "Make: ...",
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "terraform init",
            "label": "Terraform: Init",
            "options": {
                "cwd": "${fileDirname}"
            },
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "terraform plan",
            "label": "Terraform: Plan",
            "options": {
                "cwd": "${fileDirname}"
            },
            "presentation": {
                "clear": true,
                "echo": true,
                "focus": false,
                "panel": "shared",
                "reveal": "always",
                "showReuseMessage": true
            },
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "terraform apply",
            "label": "Terraform: Apply",
            "options": {
                "cwd": "${fileDirname}"
            },
            "presentation": {
                "clear": true,
                "echo": true,
                "focus": true,
                "panel": "shared",
                "reveal": "always",
                "showReuseMessage": true
            },
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "terraform show",
            "label": "Terraform: Show",
            "options": {
                "cwd": "${fileDirname}"
            },
            "presentation": {
                "clear": true,
                "echo": true,
                "focus": true,
                "panel": "shared",
                "reveal": "always",
                "showReuseMessage": true
            },
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "terraform state show ${input:terraformState}",
            "label": "Terraform: State Show ...",
            "options": {
                "cwd": "${fileDirname}"
            },
            "presentation": {
                "clear": true,
                "echo": true,
                "focus": true,
                "panel": "shared",
                "reveal": "always",
                "showReuseMessage": true
            },
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "npx doctoc --notitle --update-only ${file}",
            "label": "MD: TOC",
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "npx doctoc --notitle --update-only ${workspaceFolder}",
            "label": "MD: TOC - All",
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "brew update ; brew upgrade ; brew cleanup",
            "label": "Brew: Update + Upgrade + Clean Up",
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "gw url '${file}' | fzf | xargs open ",
            "label": "Open: URL",
            "presentation": {
                "clear": false,
                "echo": true,
                "focus": true,
                "panel": "shared",
                "reveal": "always",
                "showReuseMessage": true
            },
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "dasel --file '${file}' --parser yaml >${file}.sorted",
            "label": "Dasel: Sort YAML",
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "dasel --file '${file}' --parser json > ${file}.sorted",
            "label": "Dasel: Sort JSON",
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "dasel --file '${file}' --parser json --write yaml",
            "label": "Dasel: JSON to YAML",
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "dasel --file '${file}' --parser yaml --write json",
            "label": "Dasel: YAML to JSON",
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "npx britive-cli checkout ${input:britiveProfiles}",
            "label": "Britive: Checkout ...",
            "presentation": {
                "clear": false,
                "echo": true,
                "focus": true,
                "panel": "shared",
                "reveal": "always",
                "showReuseMessage": true
            },
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "~/.britive/console",
            "label": "Britive: Console ...",
            "presentation": {
                "clear": false,
                "echo": true,
                "focus": true,
                "panel": "shared",
                "reveal": "always",
                "showReuseMessage": true
            },
            "problemMatcher": [],
            "type": "shell"
        },
        {
            "command": "~/.britive/scan",
            "label": "Britive: Scan ...",
            "presentation": {
                "clear": false,
                "echo": true,
                "focus": true,
                "panel": "shared",
                "reveal": "always",
                "showReuseMessage": true
            },
            "problemMatcher": [],
            "type": "shell"
        }
    ],
    "version": "2.0.0"
}