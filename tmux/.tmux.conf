# SENSIBLE

set-option -g automatic-rename on
set-option -g automatic-rename-format '#{b:pane_current_path}'
set-option -g base-index 1
set-option -g default-terminal 'xterm-256color'
set-option -g history-limit 20000
set-option -g mode-keys vi
set-option -g mouse on
set-option -g pane-base-index 1
set-option -g renumber-windows on
set-option -g set-clipboard on
set-option -g status-interval 1
set-option -g status-position top
set-option -g status-right '#{?client_prefix,#[reverse][prefix]#[noreverse],} #(tmux-mem-cpu-load)'
set-option -g status-right-length 120
set-option -g terminal-features ',*:RGB'
set-option -g wrap-search off
set-option -s escape-time 0

if-shell '[[ $(uname -s) == Darwin ]]' { set -s copy-command 'pbcopy' }

###############################################################################
# KEYBINDINGS
###############################################################################

## https://gist.github.com/brendanhay/1769870#gistcomment-2334245
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T edit-mode-vi Down send-keys -X history-down
bind-key -T edit-mode-vi Up send-keys -X history-up
bind-key C-[ copy-mode
bind-key / copy-mode \; send-key /
bind-key ? copy-mode \; send-key ?

bind -n Pageup copy-mode -u
bind -n Pagedown send-keys Pagedown
bind -n S-Pageup copy-mode -u
bind -n S-Pagedown send-keys Pagedown

## productivity
bind-key C-u run-shell -b ${HOME}/.local/bin/ou
# bind-key C-f run-shell -b ${HOME}/.local/bin/cdp
bind-key C-f new-window nvim -c 'Telescope projects'
bind-key C-g run-shell -b ${HOME}/.local/bin/gh-clone
bind-key C-t new-window -c ${HOME}/Projects/tmp
bind-key C-v split-window 'tmux capture-pane -t:.- -Jp -S- | vim -c "set nomodified" -'
bind-key C-z run-shell -b 'fop'

## from: https://github.com/tmux-plugins/tmux-pain-control/blob/master/pain_control.tmux
### Window nav
bind-key '<' swap-window -t -1
bind-key '>' swap-window -t +1
bind-key 'c' new-window -c '#{pane_current_path}'
bind-key C-n select-window -n
bind-key C-p select-window -p

## Spliting windows
bind-key '%'  split-window -h -c "#{pane_current_path}"
bind-key '"'  split-window -v -c "#{pane_current_path}"
# bind-key -n 'C-\' run-shell -b ${HOME}/.local/bin/tmux-toggle-term

## Panes nav
bind-key  C-h  select-pane  -L
bind-key  C-j  select-pane  -D
bind-key  C-k  select-pane  -U
bind-key  C-l  select-pane  -R
bind-key  H    join-pane    -h  -t  !

unbind C-o
bind-key C-o select-pane -t :.+
