# vim:ft=bash:
# shellcheck shell=bash

# Hint: `complete -p` shows all completions in the form of commands you can run
# to replicate the completion behavior for aliases.

alias ..="cd .."
alias ...="cd ../.."

if hash exa 2>/dev/null; then
	alias ls="exa --group-directories-first"
elif hash gls 2>/dev/null; then
	alias ls="gls --group-directories-first"
fi
alias ll="ls -alFh"

alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'
alias grep="grep --color=auto"
hash nvim 2>/dev/null && alias vim=nvim

# if [[ "$(uname -s)" == "Darwin" ]]; then
# 	echo auth sufficient pam_tid.so | sudo tee -a /etc/pam.d/sudo
# 	sudo systemsetup -getremotelogin
# 	sudo systemsetup -setremotelogin on
# fi

# For quick edits
# shellcheck disable=SC2139
alias dotfiles="${EDITOR} ${HOME}/.dotfiles"

# ddgr
alias \?='ddgr --expand'
alias \?g="ddgr --noprompt '!g' "
alias \?gh="ddgr --noprompt '!gh' "
alias \?npm="ddgr --noprompt '!npm' "
alias \?go="ddgr --noprompt '!gopkg' "
alias \?rust="ddgr --noprompt '!rust' "

# git
alias ga="git add"
alias gc="git commit"
alias gd="git diff"
alias gco="git checkout"
alias gp="git push"
alias gpull="git pull"
alias groot='cd $(git root)'
alias gs='git status'

# vault
hash vault 2>/dev/null && complete -C "$(which vault)" vault

# terraform
if hash terraform 2>/dev/null; then
	alias tf=terraform
	alias tfv="terraform validate"
	alias tff="terraform fmt"
	alias tfp="terraform plan"
	alias tfa="terraform apply"
	alias tfss="terraform state show"
	alias tfsl="terraform state list"
	alias tfsr="terraform state list | fzf --multi --reverse --height=20 | xargs -I{} -L1 terraform state rm '{}'"
fi

# osx
if [[ $(uname) == "Darwin" ]]; then
	# desktop
	alias hidedesktop="defaults write com.apple.finder CreateDesktop -bool false && killall Finder"
	alias showdesktop="defaults write com.apple.finder CreateDesktop -bool true && killall Finder"

	# .DS_Store
	alias dsclean="find ~ -type f -name .DS_Store -exec rm -rf {} \;"

fi

# brew
if hash brew &>/dev/null; then
	test "$(uname)" == "Darwin" && alias brew="arch -arm64 brew"
	alias bubu="brew update && brew upgrade && brew cleanup --prune 0"
fi
